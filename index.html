<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>戦略検索</title>
<style>
body {
    margin: 0;
    font-family: "Segoe UI", sans-serif;
    background: #1e1f22;
    color: #ddd;
}

header {
    padding: 16px;
    background: #2b2d31;
    font-size: 20px;
}

main {
    padding: 20px;
}

.hidden {
    display: none;
}

/* 検索 */
.search-box {
    display: flex;
    gap: 20px;
    flex-wrap: wrap;
    
}

@media (max-width: 768px) {
    .search-box {
        flex-direction: column;
    }

    select {
        font-size: 16px;
    }

    button {
        width: 100%;
        font-size: 16px;
    }
}


.select-group {
    display: flex;
    flex-direction: column;
    gap: 8px;
}

select {
    background: #313338;
    color: #ddd;
    border: none;
    padding: 8px;
    border-radius: 6px;
}

button {
    background: #5865f2;
    color: white;
    border: none;
    padding: 10px 16px;
    border-radius: 6px;
    cursor: pointer;
}

button:hover {
    background: #4752c4;
}

/* 一覧 */
.result-list {
    margin-top: 30px;
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
    gap: 16px;
}

.card {
    background: #2b2d31;
    padding: 16px;
    border-radius: 10px;
    cursor: pointer;
}

.passive {
    color: #f6c177;
    font-weight: bold;
}


.card h3 {
    margin: 0 0 8px 0;
}

.tags {
    font-size: 12px;
    color: #aaa;
}

.description {
    white-space: pre-wrap;
}

/* 詳細 */
.detail-section {
    margin-bottom: 20px;
}

.detail-section h2 {
    border-bottom: 1px solid #444;
    padding-bottom: 4px;
}
</style>
</head>
<body>

<header>戦略検索ツール</header>

<main>
    <!-- 検索ページ -->
    <div id="searchPage">
        <div class="search-box">
            <div class="select-group">
                <label>戦場タグ</label>
                <select id="fieldTag" multiple size="3">
                    <option value="鴉">鴉</option>
                    <option value="暗獄">暗獄</option>
                    <option value="炎">炎</option>
                </select>
            </div>

            <div class="select-group">
                <label>特性タグ</label>
                <select id="effectTag" multiple size="6">
                    <option>火弱</option><option>水弱</option><option>雷弱</option><option>風弱</option>
                    <option>急所</option><option>焦燥</option><option>封印</option><option>混乱</option>
                    <option>過負荷</option><option>窃盗</option><option>独行</option><option>呪盾</option>
                    <option>鏡像</option><option>魑魅</option><option>幸運</option><option>特売</option>
                    <option>一致</option>
                </select>
            </div>
        </div>

        <button onclick="search()">検索</button>

        <div class="result-list" id="resultList"></div>
    </div>

    <!-- 詳細ページ -->
    <div id="detailPage" class="hidden">
        <button onclick="back()">← 戻る</button>
        <h1 id="detailTitle"></h1>

        <div class="detail-section">
            <h2>可能な戦場</h2>
            <div id="detailField"></div>
        </div>

        <div class="detail-section">
            <h2>Banカード</h2>
            <div id="detailBan"></div>
        </div>

        <div class="detail-section">
            <h2>カード構成</h2>
            <div id="detailDeck"></div>
        </div>

        <div class="detail-section">
            <h2>構成の説明</h2>
            <div id="detailDescription" class="description">
        </div>
    </div>

    </div>
</main>

<script>
const fieldOrder = ["鴉", "暗獄", "炎"];

const strategies = [
    {
        id: 1,
        title: "鴉速攻",
        fields: ["鴉"],
        tags: ["火弱", "水弱","雷弱","風弱","急所","焦燥","過負荷","窃盗","独行","呪盾","魑魅","幸運","特売"],
        ban: ["カード禁止", "忍気流失", "呪詛盾"],
        deck: [
    {
        name:"ウォーター",
        passive: "入定",
        active: ["シェア", "付与 or 全武装", "壺", "浄化 or 諸刃"]
    },
    {
        name:"Maoki",
        passive: "勇者",
        active: ["浄化", "手品", "諸刃", "契り or 壺"]
    },
    {
        name:"月忍",
        passive: "勇者",
        active: ["浄化", "手品", "諸刃", "契り or 壺"]
    }
        ],
        description:`
月忍さんとMaokiさんは火力特化型。
浄化と支援の順番間違えないように！
それと訓練所で試した結果、手品の後に浄化使っても手品の効果消えない感じので
手品→浄化→支援
or
浄化→手品→支援
の順番です！
浄化は何があってもぶっぱ直前でオネシャス
忍気流失が来た時は私が付与します。

p1ボスは私が50万弱出せれば先行確実。

p2道中朱雀使ってもok
忍気は溜めてほしいです！
p2はとりあえず最速のまんま突破できる方法を突っ込みました。
        `
    },
    {
        id: 2,
        title: "シェアあり基本系",
        fields: ["鴉","暗獄","炎"],
        tags: ["火弱", "水弱","雷弱","風弱","急所","焦燥","呪盾","魑魅"],
        ban: ["手品", "カード禁止", "全呪詛"],
        deck: [
    {
        name:"ウォーター",
        passive: "入定",
        active: ["シェア", "無収穫", "諸刃", "契り or 壺"]
    },
    {
        name:"Maoki",
        passive: "勇者、血刃（火力）",
        active: ["全デ", "壺", "諸刃", "契り"]
    },
    {
        name:"月忍",
        passive: "勇者、血刃（火力）",
        active: ["全デ", "壺", "諸刃", "契り"]
    }
        ],
        description: `
p1はデバフ2枚を使う。シェアを使ってコイン枚数カバー。
<デバフ組み合わせ>
全脱 × 全呪文
全武装 × 全脱
全脱 × 四神
全武装 × 四神
四神 × 全呪文
                など

p2を入定中に飛ばしてp2勝ち切ることを考えた。
<p2組み合わせ>
諸刃 × 契り
浄化 × 砥石（回線手裏剣、お魚手裏剣 等） 
                など
        `
    },
    {
        id: 3,
        title: "入定以外　一致",
        fields: ["鴉","暗獄","炎"],
        tags: ["一致"],
        ban: ["手品", "カード禁止", "血湧き"],
        deck: [
    {
        name:"ウォーター",
        passive: "-",
        active: ["シェア", "無収穫", "全デ", "壺"]
    },
    {
        name:"Maoki",
        passive: "-",
        active: ["全デ", "壺", "諸刃", "契り"]
    },
    {
        name:"月忍",
        passive: "-",
        active: ["全デ", "壺", "諸刃", "契り"]
    }
        ],
        description: `
まず、カード禁止のすり抜けに関してはp1はほぼ問題ない。
全デ役が二人いるので同じカードなら順序だけ入れ替え。
武装解除の人は早めの意識。残りのデバフは基本後半に打つので。

p1ではシェアあり基本系と同じく、2人のキャラチェンを入れて安定的な突破を狙う。
p1の突破は月忍さんの様子見のキャラチェンで調整したいです。
特に、全呪文を警戒

p2は「諸刃+契り」が最も強いが契りのコイン数が心配。
次策は「浄化+お魚手裏剣」
コインが足りなければこちらに変更してもらえればと思う。
他に案があればたのます！
`
    },
    {
        id:4,
        title:"入定　一致",
        fields:["鴉","暗獄","炎"],
        tags:["一致"],
        ban:["カード禁止","手品","血湧き"],
        deck:[
    {
        name:"ウォーター",
        passive:"-",
        active:["シェア","無収穫 or 単忍気流失","武装解除","壺"]
    },
    {
        neme:"Maoki",
        passive:["-"],
        active:["全武装","壺","諸刃","契り"]
    },
    {
        name:"月忍",
        passive:["-"],
        active:["忍気流失","壺","諸刃","契り"]
    }
        ],
        description: `
<最速ルートにおける入定1枚目タイム> 
・炎約6秒（？）
・鴉約7秒（？）
・暗獄12秒（？）
p1、Maokiさんと月忍さんは初手からぶっぱして入定が湧いたらキャラチェン。
ウォーターは二人のキャラチェンよりほんの少し早めに入定つっぱ。で、忍術発動。
他二人もキャラチェン次第順次入定を使う。重複しないように気を付ける。

p2はMaokiさんと月忍さんの計2枚の入定後にウォーターの入定を使う。
カードは「諸刃＋契り」がおそらく最善
次策は「浄化＋？」だと思う。？は砥石や回旋手裏剣、お魚手裏剣など。

        `
    },
    {
        id:5,
        title:"p1殺し",
        fields:["炎"],
        tags:["水弱","風弱","急所","焦燥","急所","呪盾","魑魅"],
        ban:["手品","浄化","諸刃"],
        deck:[
    {
        name:"ウォーター",
        passive:["入定"],
        active:["シェア","無収穫","全呪詛","壺"]
    },
    {
        name:"Maoki",
        passive:["勇者（火力）"],
        active:["全デ","壺","武装解除","?"]
    },
    {
        name:"月忍",
        passive:["勇者（火力）"],
        active:["全デ","壺","忍気流失","?"]
    }
        ],
        description: `
p1はデバフ2枚を使って相手を遅延、こちらは2枚のキャラチェンで飛ばすやり方。

p2は忍気流失と武装解除。私の全呪詛を刺す。
相手をかなり抑えることができるが、火力はかなり怪しいと見る。
よって
仮に全脱や四神を入定前に受けた場合はそれの効果切れまで入定は発動しない。
（全武装は除く）
しっかりと火力を出していきたい。
?はちょっとした火力アイテムを積みたい。契りやお魚手裏剣当たりが順当だろうか。

        `
    },
    {
        id:6,
        title:["炎独行"],
        fields:["炎"],
        tags:["独行"],
        ban:["シェア","無収穫","手品"],
        deck:[
    {
        name:"ウォーター",
        passive:["入定"],
        active:["全脱","?","武装解除","浄化"]
    },
    {
        name:"Maoki",
        passive:["武器使い"],
        active:["力の代償","砥石","浄化","急速"]
    },
    {
        name:"月忍",
        passive:["勇者（火力）"],
        active:["武装解除","全脱","諸刃(浄化)","契り(?)"]
    }
        ],
        description:`
p1は相変わらずの2枚デバフで相手を遅延。ウォーターは朱雀で1着取りに行く
相手からのデバフは基本1枚になるはず。相手の2着が武装解除なら2枚目がある。
・ウォーターはMaokiさんと月忍さんの火力を担保するために忍術ぶっぱ。
・Maokiさんは例の武装解除透かしで武器使いの回転の効率化して武器で火力を出しに行く。
そのため、四神だけは最警戒。その他ならデバフを様子見しながら忍術を使う。
もし、2枚目のデバフが来ない場合は全呪文盾を警戒してリソースを割いてください。
・月忍さんも火力役の1人武装解除が来そうなら透かし。（ルート的にできないかも、、）
それでも忍術は四神最警戒。その他は様子見しながら使えそう。

p2は
ウォーターはシンプル。
月忍さんは「全脱」or「諸刃+契り（浄化+）」を状況判断にゆだねます。
Maokiさんも多少状況判断。
全脱がありそうなら浄化は取った方が良いかもしれない。
なさそうなら武装解除を避ける方法は任せる。
透かしでもいいし浄化を使うもよい。
急速変換の時間を考慮したい。
        `

    },
    {
        id:7,
        title:["鴉独行"],
        fields:["鴉"],
        tags:["独行"],
        ban:["呪文盾","手品","シェア"],
        deck:[
    {
        name:"ウォーター",
        passive:["入定"],
        active:["忍気流失","無収穫","武装解除","?"]
    },
    {
        name:"Maoki",
        passive:["武器使い"],
        active:["力の代償","単忍気流失","砥石","急速"]
    },
    {
        name:"月忍",
        passive:["勇者（火力）"],
        active:["武装解除","忍気流失","諸刃(浄化)","契り(?)"]
    }
        ],
        description:`
p1は相変わらずの2枚デバフで相手を遅延。ウォーターは朱雀で1着取りに行く
相手からのデバフは基本1枚になるはず。相手の2着が武装解除なら2枚目がある。
・ウォーターはMaokiさんと月忍さんの火力を担保するために忍術ぶっぱ。
・Maokiさんは例の武装解除透かしで武器使いの回転の効率化して武器で火力を出しに行く。
そのため、四神だけは最警戒。その他ならデバフを様子見しながら忍術を使う。
もし、2枚目のデバフが来ない場合は全呪文盾を警戒してリソースを割いてください。
・月忍さんも火力役の1人。武装解除が来そうなら透かし。
それでも忍術は必ず四神最警戒。その他は様子見しながら使えそう。

p2は
ウォーターはシンプル。
月忍さんは「忍気流失」or「諸刃+契り（浄化+）」を状況判断にゆだねます。
Maokiさんは武装解除が飛んできそうならp2も武装解除透かしをしたい。
        `
    },
    {
        id:8,
        title:["鏡像１"],
        fields:["鴉","暗獄","炎"],
        tags:["鏡像"],
        ban:["四神","諸刃","武装解除"],
        decks:[
    {
        name:"ウォーター",
        passive:["雷語"],
        active:["シェア"]
    },
    {
        name:"Maoki",
        passive:["雷語"],
        active:["全手裏剣"],
    },
    {
        name:["月忍"],
        passive:["雷語"],
        active:["全手裏剣"]
    }
        ],
        description:`
全体手裏剣を獲得する総合枚数は全手裏剣3とシェア1全手裏剣2は同じ。
ルートを考えたときに最速走れる可能性を考えたらシェア入れておいても良いと思う。
フルアタック型。忍気流失にもギリ耐えうる可能性あると思う。
発動によってバフを得られる。そのバフとデバフの重複をできる限り防ぐのが理想。
        `
    },
    {
        id:9,
        title:["鏡像2"],
        fields:["鴉","暗獄","炎"],
        tags:["鏡像"],
        ban:["全手裏剣","諸刃","武装解除"],
        decks:[
    {
        name:"ウォーター",
        passvie:["入定"],
        active:["シェア"]
    },
    {
        name:"Maoki",
        passive:["武器使い（火力）"],
        active:["砥石"]
    },
    {
        name:"月忍",
        passive:["武器使い（火力）"],
        active:["砥石"]
    }
        ],
        description:`
p1,p2ともにMaokiさん、月忍さんが600コイン取れれば砥石2枚買えるような調整。
武装解除が消えることが条件レベルだと思う。
ただ、火力は落としたくないね！
これもフルアタック系統
        `
    },
    {
        id:10,
        title:["鏡像3"],
        feilds:["鴉","暗獄","炎"],
        tags:["鏡像"],
        ban:["全手裏剣","四神","砥石"],
        decks:[
    {
        name:"ウォーター",
        passive:["?"],
        active:["武装解除"]
    },
    {
        name:"Maoki",
        passive:["火力"],
        active:["火力　（諸刃、砥石、回旋手裏剣　等）"]
    },
    {
        name:"月忍",
        passive:["火力"],
        active:["火力　（諸刃、砥石、回旋手裏剣　等）"]
    }
        ],
        description:`
デバフ込みで相手の遅延と火力を両立するパターン。確実に刺さるデバフといえば武装解除。
他のデバフでは外れたときのリスクや時効を考えても効果は薄いと予想。
火力を維持しつつ獲得できるコインの数と火力のバランスを考えてカードを選択したい。
        `
    },
    {
        id:11,
        title:["混乱案1"],
        feilds:["鴉","暗獄"],
        tags:["混乱"],
        ban:["諸刃","血湧き","全脱"],
        decks:[
    {
        name:"ウォーター",
        passive:["入定"],
        active:["壺","","全呪詛","武装解除"]
    },
    {
        name:"Maoki",
        passive:["武器使い"],
        active:["壺","","砥石","急速（火力）"]
    },
    {
        name:"月忍",
        passive:["武器使い"],
        active:["壺","","砥石","急速（火力）"]
    }
        ],
        description:`
混乱は右2枚しか使わない勢いが望ましい。
こちらには急速変換がある分、壺の左入れは有利。
月忍さんやMaokiさんは火力出せるキャラが多くいるので場合によっては状況判断でp1でキャラチェンもありだと思う！
残り1つの枠は、、何か有効なのあるかな？
それとも壺やめる？少なくとも諸刃は入れたくないねw
反転とかはワンチャンありかな
        `
    },
    {
        id:12,
        title:["シェアなし基本系"],
        feilds:["鴉","暗獄","炎"],
        tags:["火弱","水弱","雷弱","風弱","急所","焦燥","呪盾","魑魅"],
        ban:["シェア","カード禁止","全脱"],
        decks:[
    {
        name:"ウォーター",
        passive:["入定"],
        active:["全デ","無収穫","全デ","壺"]
    },
    {
        name:"Maoki",
        passive:["武器使い"],
        active:["力の代償","砥石","浄化","急速"]
    },
    {
        name:"月忍",
        passive:["勇者（火力）"],
        active:["全デ","壺","諸刃","契り"]
    }
        ],
        description:`
シェアがbanされたときのみ発動と考えて良い。
p1はMaokiさんの武器の火力とその他火力で押し切る型。
この時、Maokiさんは四神以外のほぼ全てのデバフをある程度透かせる状態にあるので状況判断から火力出しをお願いしたい。
ウォーターは忍術を誘い出すためにぶっパ（最終段はデバフ警戒）。
月忍さんはそこそこのタイミングでキャラチェン。
月忍さんのデバフについて忍術を打った後になってしまっても慌てなくてよい。できれば遅めに使いたいけどねw（ゲージ8とか）本当に遅くなりすぎるようだったらp2まで持ち越しても良い。

一応他の作戦でよく使うデバフ全脱がないとして考えてみる
<全デの組み合わせ>
忍気流失 × 全武装
忍気流失 × 全呪詛
忍気流失 × 四神
全武装 × 四神
                など

p2もMaokiさんの武器と月忍さんの火力を入定で担保して飛ばしにかかりたい。
ウォーターのデバフで多少の遅延をしつつ、入定2枚目を打ったらタイミング見て交代。
最後のごり押し。
入定切れと呪文盾に注意
        `
    }
];

function search() {
    const field = [...document.getElementById("fieldTag").selectedOptions].map(o => o.value);
    const effect = [...document.getElementById("effectTag").selectedOptions].map(o => o.value);

   const results = strategies
    .filter(s =>
        field.every(f => s.fields.includes(f)) &&
        effect.every(e => s.tags.includes(e))
    )
    .sort((a, b) => {
        const aIndex = fieldOrder.findIndex(f => a.fields.includes(f));
        const bIndex = fieldOrder.findIndex(f => b.fields.includes(f));

        return aIndex - bIndex;
    });


    const list = document.getElementById("resultList");
    list.innerHTML = "";

    results.forEach(s => {
        const div = document.createElement("div");
        div.className = "card";
        div.innerHTML = `
            <h3>${s.title}</h3>
            <div class="tags">${s.fields.join(" / ")} | ${s.tags.join(", ")}</div>
        `;
        div.onclick = () => showDetail(s);
        list.appendChild(div);
    });
}

function showDetail(s) {
    document.getElementById("searchPage").classList.add("hidden");
    document.getElementById("detailPage").classList.remove("hidden");
    detailDescription.textContent = s.description;

    detailTitle.textContent = s.title;
    detailField.textContent = s.fields.join(", ");
    detailBan.textContent = s.ban.join(", ");

    detailDeck.innerHTML = "";
    s.deck.forEach((player, i) => {
        detailDeck.innerHTML += `
            <div style="margin-bottom:12px;">
                <b>${player.name}さん</b><br>
                パッシブ：${player.passive}<br>
                アクティブ：${player.active.join(", ")}
            </div>
        `;
    });

}

function back() {
    document.getElementById("detailPage").classList.add("hidden");
    document.getElementById("searchPage").classList.remove("hidden");
}

search();
</script>
</body>
</html>
